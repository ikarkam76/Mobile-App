{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { firebase } from \"../../fireBase/config\";\nvar uploadPhoto = function () {\n  var _ref = _asyncToGenerator(function* (photo) {\n    var fileName = photo.substring(photo.lastIndexOf(\"/\") + 1);\n    var response = yield fetch(photo);\n    var file = yield response.blob();\n    yield firebase.storage().ref(\"Photos/\" + fileName).put(file);\n    alert(\"Upload!\");\n    var processedPhoto = yield firebase.storage().ref(\"Photos\").child(fileName).getDownloadURL();\n    return processedPhoto;\n  });\n  return function uploadPhoto(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var uploadPostToServer = function () {\n  var _ref2 = _asyncToGenerator(function* (userId, login, photo, comment, location) {\n    var photoToSend = yield uploadPhoto(photo);\n    yield firebase.firestore().collection(\"posts\").add({\n      userId: userId,\n      login: login,\n      photoToSend: photoToSend,\n      comment: comment,\n      location: location.coords\n    });\n  });\n  return function uploadPostToServer(_x2, _x3, _x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["firebase","uploadPhoto","photo","fileName","substring","lastIndexOf","response","fetch","file","blob","storage","ref","put","alert","processedPhoto","child","getDownloadURL","uploadPostToServer","userId","login","comment","location","photoToSend","firestore","collection","add","coords"],"sources":["C:/Projects/React Native/Mobile App/redux/files/dataBaseOperations.js"],"sourcesContent":["import { firebase } from \"../../fireBase/config\";\r\n\r\nconst uploadPhoto = async (photo) => {\r\n  const fileName = photo.substring(photo.lastIndexOf(\"/\") + 1);\r\n  const response = await fetch(photo);\r\n  const file = await response.blob();\r\n  await firebase.storage().ref(`Photos/${fileName}`).put(file);\r\n  alert(\"Upload!\");\r\n  const processedPhoto = await firebase\r\n    .storage()\r\n    .ref(\"Photos\")\r\n    .child(fileName)\r\n    .getDownloadURL();\r\n  return processedPhoto;\r\n};\r\n\r\nexport const uploadPostToServer = async (userId, login, photo, comment, location) => {\r\n  const photoToSend = await uploadPhoto(photo);\r\n  await firebase\r\n    .firestore()\r\n    .collection(\"posts\")\r\n    .add({ userId, login, photoToSend, comment, location: location.coords });\r\n  \r\n};\r\n"],"mappings":";AAAA,SAASA,QAAQ;AAEjB,IAAMC,WAAW;EAAA,6BAAG,WAAOC,KAAK,EAAK;IACnC,IAAMC,QAAQ,GAAGD,KAAK,CAACE,SAAS,CAACF,KAAK,CAACG,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC5D,IAAMC,QAAQ,SAASC,KAAK,CAACL,KAAK,CAAC;IACnC,IAAMM,IAAI,SAASF,QAAQ,CAACG,IAAI,EAAE;IAClC,MAAMT,QAAQ,CAACU,OAAO,EAAE,CAACC,GAAG,aAAWR,QAAQ,CAAG,CAACS,GAAG,CAACJ,IAAI,CAAC;IAC5DK,KAAK,CAAC,SAAS,CAAC;IAChB,IAAMC,cAAc,SAASd,QAAQ,CAClCU,OAAO,EAAE,CACTC,GAAG,CAAC,QAAQ,CAAC,CACbI,KAAK,CAACZ,QAAQ,CAAC,CACfa,cAAc,EAAE;IACnB,OAAOF,cAAc;EACvB,CAAC;EAAA,gBAZKb,WAAW;IAAA;EAAA;AAAA,GAYhB;AAED,OAAO,IAAMgB,kBAAkB;EAAA,8BAAG,WAAOC,MAAM,EAAEC,KAAK,EAAEjB,KAAK,EAAEkB,OAAO,EAAEC,QAAQ,EAAK;IACnF,IAAMC,WAAW,SAASrB,WAAW,CAACC,KAAK,CAAC;IAC5C,MAAMF,QAAQ,CACXuB,SAAS,EAAE,CACXC,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAAC;MAAEP,MAAM,EAANA,MAAM;MAAEC,KAAK,EAALA,KAAK;MAAEG,WAAW,EAAXA,WAAW;MAAEF,OAAO,EAAPA,OAAO;MAAEC,QAAQ,EAAEA,QAAQ,CAACK;IAAO,CAAC,CAAC;EAE5E,CAAC;EAAA,gBAPYT,kBAAkB;IAAA;EAAA;AAAA,GAO9B"},"metadata":{},"sourceType":"module"}